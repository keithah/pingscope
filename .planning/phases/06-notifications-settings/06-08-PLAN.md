---
phase: 06-notifications-settings
plan: 08
type: execute
wave: 2
depends_on: ["07"]
files_modified: []
autonomous: false
gap_closure: true
gap_scope:
  mode: gap-only
  source_verification: ".planning/phases/06-notifications-settings/06-notifications-settings-VERIFICATION.md"
  failed_truths:
    - "User can configure notification settings per-host and globally"
    - "Settings panel opens with Cmd+, and shows all three tabs"
  requirements_in_scope:
    - "NOTF-03"
    - "SETT-02"
    - "SETT-05"
  requirements_not_in_scope:
    - "NOTF-01, NOTF-02, NOTF-04, NOTF-05, NOTF-06, NOTF-07, NOTF-08 (NEEDS HUMAN scenario validation in 06-06)"
    - "NOTF-09, NOTF-10, SETT-01, SETT-03, SETT-04, SETT-06 (already satisfied in verification)"

must_haves:
  truths:
    - "Settings panel opens with Cmd+, and shows all three tabs"
    - "User can configure notification settings per-host and globally"
    - "Updated notification settings persist after app restart"
  artifacts:
    - path: "Sources/PingScope/Views/Settings/PingMonitorSettingsView.swift"
      provides: "Three-tab Settings shell"
      contains: "TabView"
    - path: "Sources/PingScope/Views/Settings/NotificationSettingsView.swift"
      provides: "Advanced notification controls in active settings flow"
      contains: "cooldownSeconds|highLatencyThresholdMS|degradationPercentage|intermittent"
    - path: "Sources/PingScope/MenuBar/NotificationPreferencesStore.swift"
      provides: "Persistent storage for notification preferences"
      contains: "savePreferences|loadPreferences"
  key_links:
    - from: "Cmd+, command in PingMonitorApp"
      to: "AppDelegate.openSettings()"
      via: "CommandGroup(.appSettings)"
      pattern: "keyboardShortcut\(\",\""
    - from: "PingMonitorSettingsView notifications tab"
      to: "NotificationPreferencesStore"
      via: "NotificationSettingsView bindings"
      pattern: "savePreferences"
---

<objective>
Human verification checkpoint for Phase 6 gap closure to confirm Settings tab structure and notification configuration are now user-accessible and persistent.

Purpose: The prior verification failed on user-observable settings wiring. This checkpoint validates the repaired flows in runtime.
Scope note: This checkpoint intentionally verifies only the previously failed gap truths and their requirement mapping (`NOTF-03`/`SETT-02`/`SETT-05`).
Output: Approved (or diagnosed) confirmation for the two failed Phase 6 truths.
</objective>

<execution_context>
@/Users/keith/.config/opencode/get-shit-done/workflows/execute-plan.md
@/Users/keith/.config/opencode/get-shit-done/templates/summary.md
</execution_context>

<context>
@.planning/PROJECT.md
@.planning/ROADMAP.md
@.planning/STATE.md
@.planning/phases/06-notifications-settings/06-notifications-settings-VERIFICATION.md
@.planning/phases/06-notifications-settings/06-07-SUMMARY.md
</context>

<tasks>

<task type="checkpoint:human-verify" gate="blocking">
  <what-built>
Active Settings now uses a three-tab shell (Hosts, Notifications, Display), and Notifications tab exposes/persists advanced global controls (cooldown, high-latency threshold, degradation %, intermittent settings).
  </what-built>
  <how-to-verify>
1. Build and run: `swift build && .build/debug/PingScope`.
2. Press Cmd+, to open Settings.
   - Expected: one Settings window opens with tabs `Hosts`, `Notifications`, `Display`.
3. Open `Notifications` tab and modify:
   - Cooldown period
   - High latency threshold
   - Degradation percentage
   - Intermittent settings (window/count)
   - Expected: controls are visible and editable from this active Settings flow.
4. Verify per-host path still exists:
   - Open Hosts tab, edit a host, confirm per-host notifications toggle is still available.
5. Quit and relaunch app, open Settings -> Notifications.
   - Expected: values changed in step 3 persist after restart.
6. Confirm Display tab still renders and toggles can be changed.
  </how-to-verify>
  <resume-signal>Type "approved" if all checks pass, or describe exactly which step failed.</resume-signal>
</task>

</tasks>

<verification>
Human verification of previously failed truths from `06-notifications-settings-VERIFICATION.md`.
This gap-only checkpoint does not replace full alert-type runtime scenario checks for `NOTF-01..NOTF-08`, which remain covered by the broader Phase 6 runtime verification flow (`06-06-PLAN.md`).
</verification>

<success_criteria>
- Previously failed truth "Settings panel opens with Cmd+, and shows all three tabs" is verified.
- Previously failed truth "User can configure notification settings per-host and globally" is verified.
- Persistence of edited notification settings across restart is verified.
</success_criteria>

<output>
After completion, create `.planning/phases/06-notifications-settings/06-08-SUMMARY.md`
</output>
